item_names = items.map(&:name).sort

counts = Hash.new(0)
item_names.each { |name| counts[name] += 1 }
unique_item = item_names.uniq
unique_item.each_with_index do |name, i|
  is_last = i+1 == unique_item.size
  span do 
    if counts[name] > 1
      strong "#{counts[name]}x "
    end
    span "#{name}#{is_last ? "": ","}"
  end
end